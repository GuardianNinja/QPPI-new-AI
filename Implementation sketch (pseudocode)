# simplified flow
image, latent = generator.generate(prompt)
sig = sign(hash(latent), private_key)
stego_embed(image, sig)

results = parallel_verify(image, latent, public_key)
consensus = weighted_consensus(results)

if consensus >= THRESH:
    publish(image, metadata)
else:
    if attempts < MAX_RETRIES:
        adjust_generator_params(results.diagnostics)
        attempts += 1
        goto generation
    else:
        quarantine(image, log=results)
